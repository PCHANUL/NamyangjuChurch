# Migration `20201021133637-init`

This migration has been generated by chanul94 at 10/21/2020, 10:36:37 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "User" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "nickname" TEXT NOT NULL,
    "password" TEXT NOT NULL
)

CREATE TABLE "Category" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL
)

CREATE TABLE "DetailCategory" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "categoryId" INTEGER NOT NULL,

    FOREIGN KEY ("categoryId") REFERENCES "Category"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "Post" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "detailId" INTEGER NOT NULL,

    FOREIGN KEY ("detailId") REFERENCES "DetailCategory"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "Contents" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "title" TEXT NOT NULL,
    "desc" TEXT NOT NULL,
    "url" TEXT NOT NULL,
    "postId" INTEGER NOT NULL,

    FOREIGN KEY ("postId") REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "User.nickname_unique" ON "User"("nickname")

CREATE UNIQUE INDEX "Contents_postId_unique" ON "Contents"("postId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201021133637-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,47 @@
+datasource db {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id          Int      @id @default(autoincrement())
+  createdAt   DateTime @default(now())
+  nickname    String   @unique
+  password    String
+}
+
+model Category {
+  id          Int     @id @default(autoincrement())
+  name        String
+  details     DetailCategory[]
+}
+
+model DetailCategory {
+  id          Int            @id @default(autoincrement())
+  name        String
+  category    Category       @relation(fields: [categoryId], references: [id])
+  categoryId  Int
+  posts       Post[]
+}
+
+model Post {
+  id          Int            @id @default(autoincrement())
+  createdAt   DateTime       @default(now())
+  detail      DetailCategory @relation(fields: [detailId], references: [id])
+  detailId    Int
+  content     Contents
+}
+
+model Contents {
+  id          Int            @id @default(autoincrement())
+  title       String
+  desc        String
+  url         String
+  post        Post           @relation(fields: [postId], references: [id])
+  postId      Int
+}
+
```


